<!doctype html>
<html lang="en">
  <meta charset="utf-8">
  <title>Minimal Audio Player</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.20/webcomponents-lite.min.js"></script>
  <link rel="import" href="https://cdn.rawgit.com/Polymer/polymer/master/polymer.html">
  <link rel="stylesheet" href="https://unpkg.com/normalize.css@4.2.0">
  <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.6.3/css/font-awesome.min.css">
  <style>
    html, body {
      height: 100%;
      width: 100%;
    }
  </style>
  <dom-module id="minimal-audio">
    <template>
      <style>
        .controls {
          height: 100%;
          text-align: center;
        }
        .icon {
          display: block-inline;
          font-size: 100px;
        }
      </style>
      <div class="controls" on-tap="handleTap">
        <span class$="icon fa fa-{{iconClass(playing)}}" />
      </div>
    </template>
    <script>
      // HTMLImports.whenReady(() => Polymer(MinimalAudio))
      Polymer({
        iconClass: function (playing) {
          return playing ? 'pause' : 'play'
        },
        handleTap: function () {
          this.audio[this.playing ? 'pause' : 'play']()
          this.playing = !this.playing
        },
        is: 'minimal-audio',
        properties: {
          playing: {
            type: Boolean,
            notify: true,
            value: false
          },
          src: {
            type: String
          }
        },
        ready: function () {
          this.audio = new Audio(this.src)
          this.audio.addEventListener('playing', () => this.playing = true)
          this.audio.addEventListener('pause', () => this.playing = false)
        }
      })
    </script>
  </dom-module>
  <minimal-audio src="http://developer.mozilla.org/@api/deki/files/2926/=AudioTest.ogg"/>
</html>
